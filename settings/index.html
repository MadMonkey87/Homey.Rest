<html>

<head>
    <script type="text/javascript" src="/homey.js" data-origin="settings"></script>
    <!--<script src='https://cdn.staticaly.com/gh/robertklep/homey-mocks/v0.0.4/homey-settings-mock.js'></script>-->
    <!--<script src="js/jquery-3.5.1.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>
        <script src="js/bootstrap.min.js" integrity="sha384-OgVRvuATP1z7JjHLkuOU7Xw704+h835Lr+6QL9UvYjZE3Ipu6Tp75j7Bh/kR0JKI" crossorigin="anonymous"></script>-->
    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"
        integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj"
        crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js"
        integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q"
        crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/js/bootstrap.min.js"
        integrity="sha384-OgVRvuATP1z7JjHLkuOU7Xw704+h835Lr+6QL9UvYjZE3Ipu6Tp75j7Bh/kR0JKI"
        crossorigin="anonymous"></script>
    <link rel="stylesheet" href="css/bootstrap.css">
    <link rel="stylesheet" href="css/animation.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
</head>

<body>

    <div class="homeyAnimation"></div>

    <nav>
        <div class="nav nav-tabs glass-dark" id="nav-tab" role="tablist"
            style="margin-left: 5px; margin-top: 5px; margin-right: 5px;">
            <a class="nav-item nav-link active" id="nav-header-tab" data-toggle="tab" href="#nav-header" role="tab"
                aria-controls="nav-header" aria-selected="true"
                style="border-top-left-radius: 3px; border-bottom-left-radius: 3px;">Headers</a>
            <a class="nav-item nav-link" id="nav-certificate-tab" data-toggle="tab" href="#nav-certificate" role="tab"
                aria-controls="nav-certificate" aria-selected="false">Certificates</a>
            <a class="nav-item nav-link" id="nav-about-tab" data-toggle="tab" href="#nav-about" role="tab"
                aria-controls="nav-contact" aria-selected="false">About</a>
        </div>
    </nav>
    <div class="tab-content" id="nav-tabContent">
        <div class="tab-pane fade show active" id="nav-header" role="tabpanel" aria-labelledby="nav-header-tab">

            <!-- header modal  begin-->
            <div class="modal fade" id="createHeaderCollectionModal" tabindex="-1" role="dialog" aria-hidden="true">
                <div class="modal-dialog">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h5 class="modal-title">Header Collection</h5>
                            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                <span aria-hidden="true">&times;</span>
                            </button>
                        </div>
                        <div class="modal-body">
                            <div class="row">
                                <div class="col-sm">
                                    <div class="form-group">
                                        <label>Name</label>
                                        <div class="input-group">
                                            <input type="text" class="form-control" id="newHeaderCollectionName">
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-sm">
                                    <div class="form-group">
                                        <label>Description</label>
                                        <div class="input-group">
                                            <input type="text" class="form-control" id="newHeaderCollectionDescription">
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <ul class="list-group list-group-flush" id="newHeaderCollectionHeaders">
                            </ul>

                            <div class="row">
                                <div class="col-sm">
                                    <div class="form-group">
                                        <label>New Header Name</label>
                                        <div class="input-group">
                                            <input type="text" class="form-control" id="newHeaderItemName">
                                        </div>
                                    </div>
                                </div>
                                <div class="col-sm">
                                    <div class="form-group">
                                        <label>New Header Value</label>
                                        <div class="input-group">
                                            <input type="text" class="form-control" id="newHeaderItemValue">
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-sm">
                                    <div class="form-group" style="margin-bottom: 0"></div>
                                    <button type="button" class="btn btn-primary float-right"
                                        id="newHeaderItemSaveButton">
                                        Add Header to Collection
                                    </button>
                                </div>
                            </div>

                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button>
                            <button type="button" class="btn btn-primary" data-dismiss="modal"
                                id="newHeaderCollectionSaveButton">Save</button>
                        </div>
                    </div>
                </div>
            </div>
            <!--header modal end-->

            <!--header tab begin-->
            <div class="card glass" style="margin-top: 10px;">
                <div class="card-body">
                    <p class="card-text">If you need to send specific headers with your request you can create a header
                        collection here then choose this collection in your flow card. In case you need to set the
                        headers dynamically there are also flow cards available that manipulate these header collections
                        here.</p>
                    <p>Hint: some headers will be set automatically, i.e the Content-Length</p>

                    <div class="row">
                        <div class="col-sm">
                            <button type="button" class="btn btn-primary float-right"
                                id="createHeaderCollectionModalButton" style="width: 125px;" data-toggle="modal"
                                data-target="#createHeaderCollectionModal">Add
                                Collection</button>
                        </div>
                    </div>
                    <br>

                    <ul class="list-group list-group-flush" id="headerCollection">
                    </ul>
                </div>
            </div>
            <!--header tab end-->

        </div>

        <div class="tab-pane fade" id="nav-certificate" role="tabpanel" aria-labelledby="nav-certificate-tab">

            <!-- certificate create modal  begin-->
            <div class="modal fade" id="createCertificateModal" tabindex="-1" role="dialog" aria-hidden="true">
                <div class="modal-dialog">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h5 class="modal-title">Certificate</h5>
                            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                <span aria-hidden="true">&times;</span>
                            </button>
                        </div>
                        <div class="modal-body">
                            <div class="row">
                                <div class="col-sm">
                                    <div class="form-group">
                                        <label>File</label>
                                        <div class="input-group">
                                            <input id="certificateFile" type="file">
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-sm">
                                    <div class="form-group">
                                        <label>Name</label>
                                        <div class="input-group">
                                            <input type="text" class="form-control" id="certificateName">
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-sm">
                                    <div class="form-group">
                                        <label>Description</label>
                                        <div class="input-group">
                                            <input type="text" class="form-control" id="certificateDescription">
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-sm">
                                    <div class="form-group">
                                        <label>Credential</label>
                                        <div class="form-check" style="margin-left: 25px;">
                                            <input class="form-check-input" type="radio" name="certificateCredential"
                                                id="certificateCredentialPassword" checked>
                                            <label class="form-check-label" for="certificateCredentialPassword">
                                                Password
                                            </label>
                                        </div>
                                        <div class="form-check" style="margin-left: 25px;">
                                            <input class="form-check-input" type="radio" name="certificateCredential"
                                                id="certificateCredentialKeyFile">
                                            <label class="form-check-label" for="certificateCredentialKeyFile">
                                                Key file
                                            </label>
                                        </div>
                                        <div class="input-group" style="padding-left: 25px;"
                                            id="certificateCredentialPasswordInput">
                                            <input type="password" class="form-control" id="certificatePassword">
                                        </div>
                                        <div class="input-group" style="padding-left: 25px; display: none"
                                            id="certificateCredentialKeyFileInput">
                                            <input id="certificateKeyFile" type="file">
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button>
                            <button type="button" class="btn btn-primary" data-dismiss="modal"
                                id="newCertificateSaveButton">Save</button>
                        </div>
                    </div>
                </div>
            </div>
            <!--certificate create modal end-->

            <!-- certificate detail modal  begin-->
            <div class="modal fade" id="certificateDetailModal" tabindex="-1" role="dialog" aria-hidden="true">
                <div class="modal-dialog">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h5 class="modal-title">Certificate</h5>
                            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                <span aria-hidden="true">&times;</span>
                            </button>
                        </div>
                        <div class="modal-body">
                            <div class="row">
                                <div class="col-sm">
                                    <div class="form-group">
                                        <small class="form-text text-muted">Name</small>
                                        <label style="font-weight: bold; font-size: 18px;"
                                            id="certificateDetailName"></label>
                                    </div>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-sm">
                                    <div class="form-group">
                                        <small class="form-text text-muted">Description</small>
                                        <label style="font-weight: bold; font-size: 18px;"
                                            id="certificateDetailDescription"></label>
                                    </div>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-sm">
                                    <div class="form-group">
                                        <small class="form-text text-muted">Size</small>
                                        <label style="font-weight: bold; font-size: 18px;"
                                            id="certificateDetailSize"></label>
                                    </div>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-sm">
                                    <div class="form-group">
                                        <small class="form-text text-muted">Hash (SHA256)</small>
                                        <label style="font-weight: bold; font-size: 18px;"
                                            id="certificateDetailHash"></label>
                                    </div>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-sm">
                                    <div class="form-group">
                                        <small class="form-text text-muted">Credentials</small>
                                        <label style="font-weight: bold; font-size: 18px;"
                                            id="certificateDetailCredential1"></label>
                                        <label style="font-weight: bold; font-size: 18px;"
                                            id="certificateDetailCredential2"></label>
                                        <label style="font-weight: bold; font-size: 18px;"
                                            id="certificateDetailCredential3"></label>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button>
                            <!--<button type="button" class="btn btn-primary" data-dismiss="modal"
                                id="deleteCertificateButton">Delete</button>-->
                        </div>
                    </div>
                </div>
            </div>
            <!--certificate detail modal end-->

            <!--certificate tab begin-->
            <div class="card glass" style="margin-top: 10px;">
                <div class="card-body">
                    <p class="card-text">Some description goes here</p>

                    <div class="row">
                        <div class="col-sm">
                            <button type="button" class="btn btn-primary float-right" id="createCertificateModalButton"
                                style="width: 125px;" data-toggle="modal" data-target="#createCertificateModal">Add
                                Certificate</button>
                        </div>
                    </div>
                    <br>

                    <ul class="list-group list-group-flush" id="certificateList">
                    </ul>
                </div>
            </div>
            <!--certificate tab end-->

        </div>

        <div class="tab-pane fade" id="nav-about" role="tabpanel" aria-labelledby="nav-about-tab">

            <!--about tab begin-->
            <div class="card glass" style="margin-top: 10px;">
                <div class="card-body">
                    <h5 class="card-title">Advanced Rest Client (ARC) for homey v1.1.0</h5>
                    <h3 class="card-title">Â© Philippe Wechsler 2020</h3>
                    <div>Icons made by <a href="https://www.flaticon.com/authors/freepik" title="Freepik">Freepik</a>
                        from <a href="https://www.flaticon.com/" title="Flaticon">www.flaticon.com</a></div>
                </div>
            </div>

            <!--about tab end-->
        </div>
    </div>

    <script type="text/javascript">

        function onHomeyReady(Homey) {

            if (Homey.isMock) {
                Homey.alert('Warning: Homey is mocked only!!!');
            }

            // headers main

            let headerCollections = [];

            function renderHeaderCollections() {
                let collectionMarkup = '';
                for (var i = 0; i < headerCollections.length; i++) {
                    collectionMarkup += `
                        <li class="list-group-item transparent">
                            <div class="form-group">
                                <label style="font-weight: bold; font-size: 18px; margin-top: 5px">${headerCollections[i].name}</label>
                                <button type="button" class="btn btn-secondary float-right" style="margin-top: 25px; height: 42px; width: 42px"><span
                                        class="fa fa-trash" onclick="removeHeaderCollection(${i})"></span></button>
                                <button type="button" class="btn btn-primary float-right" style="margin-top: 25px; height: 42px; width: 42px" data-toggle="modal" data-target="#createHeaderCollectionModal" onclick="editHeaderCollection(${i})"><span
                                        class="fa fa-edit"></span></button>
                                        <small class="form-text text-muted">${headerCollections[i].description}</small>
                            </div>
                        </li>
                    `;
                }
                document.getElementById('headerCollection').innerHTML = collectionMarkup;
            }

            window.removeHeaderCollection = function (e) {
                headerCollections.splice(e, 1);
                renderHeaderCollections();
                persistHeaderCollections();
            }

            window.editHeaderCollection = function (e) {
                this.selectedHeaderCollection = { ...headerCollections[e] };
                renderSelectedHeaderCollection();
            }

            persistHeaderCollections = function () {
                Homey.set('headerCollections', headerCollections, (err, result) => {
                    if (err) return Homey.alert(err);
                })
            }

            // create/edit headers dialog

            let selectedHeaderCollection = {};

            document.getElementById('newHeaderCollectionSaveButton').addEventListener('click', (e) => {
                if (this.selectedHeaderCollection.id == null) {
                    this.selectedHeaderCollection.id = generateGuid();
                    headerCollections.push(this.selectedHeaderCollection);
                } else {
                    for (var i = 0; i < headerCollections.length; i++) {
                        if (headerCollections[i].id === this.selectedHeaderCollection.id) {
                            headerCollections[i] = this.selectedHeaderCollection;
                            break;
                        }
                    }
                }
                renderHeaderCollections();
                persistHeaderCollections();
            });

            document.getElementById('createHeaderCollectionModalButton').addEventListener('click', (e) => {
                this.selectedHeaderCollection = { name: '', description: '', headers: [], id: null };
                renderSelectedHeaderCollection();
            });

            document.getElementById('newHeaderItemSaveButton').addEventListener('click', (e) => {
                this.selectedHeaderCollection.headers.push({ name: document.getElementById('newHeaderItemName').value, value: document.getElementById('newHeaderItemValue').value });
                document.getElementById('newHeaderItemName').value = '';
                document.getElementById('newHeaderItemValue').value = '';
                renderSelectedHeaderCollection();
            });

            document.getElementById('newHeaderCollectionName').addEventListener('input', (e) => { updateHeaderCollectionForm() });
            document.getElementById('newHeaderCollectionDescription').addEventListener('input', (e) => { updateHeaderCollectionForm() });
            document.getElementById('newHeaderItemName').addEventListener('input', (e) => { updateHeaderCollectionForm() });
            document.getElementById('newHeaderItemValue').addEventListener('input', (e) => { updateHeaderCollectionForm() });

            function updateHeaderCollectionForm() {
                this.selectedHeaderCollection.name = document.getElementById('newHeaderCollectionName').value;
                this.selectedHeaderCollection.description = document.getElementById('newHeaderCollectionDescription').value;


                document.getElementById('newHeaderCollectionSaveButton').disabled = this.selectedHeaderCollection.name.length < 3 || this.selectedHeaderCollection.headers.length == 0;
                document.getElementById('newHeaderItemSaveButton').disabled = document.getElementById('newHeaderItemName').value.length < 1;
            }

            function renderSelectedHeaderCollection() {
                document.getElementById('newHeaderCollectionName').value = this.selectedHeaderCollection.name;
                document.getElementById('newHeaderCollectionDescription').value = this.selectedHeaderCollection.description;
                let headerMarkup = '';
                for (var i = 0; i < this.selectedHeaderCollection.headers.length; i++) {
                    headerMarkup += `
                        <li class="list-group-item transparent">
                            <div class="form-group">
                                <small class="form-text text-muted">${this.selectedHeaderCollection.headers[i].name}</small>
                                <label style="font-weight: bold; font-size: 18px;">${this.selectedHeaderCollection.headers[i].value}</label>
                                <button type="button" class="btn btn-secondary float-right" style="width: 42px; height: 42px" onclick="removeHeaderCollectionItem(${i})">
                                    <span class="fa fa-trash"></span>
                                </button>
                            </div>
                        </li>
                    `;
                }
                document.getElementById('newHeaderCollectionHeaders').innerHTML = headerMarkup;
                updateHeaderCollectionForm();
            }

            window.removeHeaderCollectionItem = function (e) {
                this.selectedHeaderCollection.headers.splice(e, 1);
                renderSelectedHeaderCollection();
            }

            // certificates main

            let certificates = [];

            function renderCertificates() {
                let collectionMarkup = '';
                for (var i = 0; i < certificates.length; i++) {
                    collectionMarkup += `
                        <li class="list-group-item transparent">
                            <div class="form-group">
                                <label style="font-weight: bold; font-size: 18px; margin-top: 5px">${certificates[i].name}</label>
                                <button type="button" class="btn btn-secondary float-right" style="margin-top: 25px; height: 42px; width: 42px"><span
                                        class="fa fa-trash" onclick="removeCertificate(${i})"></span></button>
                                <button type="button" class="btn btn-primary float-right" style="margin-top: 25px; height: 42px; width: 42px" data-toggle="modal" data-target="#certificateDetailModal" onclick="editCertificate(${i})"><span
                                        class="fa fa-info"></span></button>
                                        <small class="form-text text-muted">${certificates[i].description}</small>
                            </div>
                        </li>
                    `;
                }
                document.getElementById('certificateList').innerHTML = collectionMarkup;
            }

            window.removeCertificate = function (e) {
                Homey.api('DELETE', '/certificate?hash=' + certificates[e].certificateFileName, null, function (err, result) {
                    if (err) {
                        Homey.alert(err);
                    }
                    Homey.get('certificates', (err, result) => {
                        if (err) return Homey.alert(err);
                        if (result) {
                            certificates = result;
                        }
                        renderCertificates();
                    });
                })
            }

            window.editCertificate = function (e) {
                const selectedCertificate = certificates[e];
                document.getElementById('certificateDetailName').innerHTML = selectedCertificate.name;
                document.getElementById('certificateDetailDescription').innerHTML = selectedCertificate.description;
                document.getElementById('certificateDetailSize').innerHTML = selectedCertificate.size + ' bytes';
                document.getElementById('certificateDetailHash').innerHTML = selectedCertificate.certificateFileName;
                document.getElementById('certificateDetailCredential1').innerHTML = 'Mode: ' + selectedCertificate.credential === 'password' ? 'password' : 'key file';
                document.getElementById('certificateDetailCredential2').innerHTML = selectedCertificate.credential === 'keyfile' ? (selectedCertificate.keyFileSize + ' bytes') : '';
                document.getElementById('certificateDetailCredential3').innerHTML = 'Hash (SHA256)' + selectedCertificate.credential === 'keyfile' ? selectedCertificate.keyFileName : '';
            }

            // certificate add/edit dialog

            let selectedCertificate = {};

            document.getElementById('newCertificateSaveButton').addEventListener('click', (e) => {
                Homey.api('POST', '/certificate', this.selectedCertificate, function (err, result) {
                    if (err) {
                        Homey.alert(err);
                    }
                    Homey.get('certificates', (err, result) => {
                        if (err) return Homey.alert(err);
                        if (result) {
                            certificates = result;
                        }
                        renderCertificates();
                    });
                })
            });

            document.getElementById('createCertificateModalButton').addEventListener('click', (e) => {
                this.selectedCertificate = { name: '', description: '', credential: 'password', password: '', certificateFile: null, keyFile: null };
                renderSelectedCertificate();
            });

            document.getElementById('certificateName').addEventListener('input', (e) => { updateCertificateForm() });
            document.getElementById('certificateDescription').addEventListener('input', (e) => { updateCertificateForm() });
            document.getElementById('certificateCredentialPassword').addEventListener('change', (e) => { this.selectedCertificate.credential = 'password'; renderSelectedCertificate() });
            document.getElementById('certificateCredentialKeyFile').addEventListener('change', (e) => { this.selectedCertificate.credential = 'keyfile'; renderSelectedCertificate() });
            document.getElementById('certificatePassword').addEventListener('change', (e) => { updateCertificateForm() });
            document.getElementById('certificateFile').addEventListener('change', onCertificateFileChanged);
            document.getElementById('certificateKeyFile').addEventListener('change', onCertificateKeyFileChanged);

            function updateCertificateForm() {
                this.selectedCertificate.name = document.getElementById('certificateName').value;
                this.selectedCertificate.description = document.getElementById('certificateDescription').value;
                this.selectedCertificate.password = document.getElementById('certificatePassword').value;

                document.getElementById('newCertificateSaveButton').disabled = this.selectedCertificate.certificateFile == null || this.selectedCertificate.name.length < 3 || this.selectedCertificate.description.length < 3 || (this.selectedCertificate.credential === 'password' && this.selectedCertificate.password.length < 1) || (this.selectedCertificate.credential === 'keyfile' && this.selectedCertificate.keyFile == null);
            }

            function onCertificateFileChanged(e) {
                const file = e.target.files[0];
                var reader = new FileReader();
                reader.onload = function (data) {
                    setCertificateFileContent(file.name, data.target.result);
                }
                reader.readAsDataURL(file);
            }

            function setCertificateFileContent(filename, content) {
                this.selectedCertificate.name = filename;
                this.selectedCertificate.certificateFile = content;
                renderSelectedCertificate();
            }

            function onCertificateKeyFileChanged(e) {
                const file = e.target.files[0];
                var reader = new FileReader();
                reader.onload = function (data) {
                    setCertificateKeyFileContent(file.name, data.target.result);
                }
                reader.readAsDataURL(file);
            }

            function setCertificateKeyFileContent(filename, content) {
                this.selectedCertificate.keyFile = content;
                renderSelectedCertificate();
            }

            function renderSelectedCertificate() {
                document.getElementById('certificateName').value = this.selectedCertificate.name;
                document.getElementById('certificateDescription').value = this.selectedCertificate.description;
                if (this.selectedCertificate.credential == 'password') {
                    document.getElementById('certificateCredentialPasswordInput').style.display = 'flex';
                    document.getElementById('certificateCredentialKeyFileInput').style.display = 'none';
                    document.getElementById('certificateCredentialPassword').checked = true;
                } else if (this.selectedCertificate.credential == 'keyfile') {
                    document.getElementById('certificateCredentialPasswordInput').style.display = 'none';
                    document.getElementById('certificateCredentialKeyFileInput').style.display = 'flex';
                    document.getElementById('certificateCredentialKeyFile').checked = true;
                }
                document.getElementById('certificatePassword').value = this.selectedCertificate.password;
                updateCertificateForm();
            }

            // utils

            function generateGuid() {
                return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function (c) {
                    var r = Math.random() * 16 | 0, v = c == 'x' ? r : (r & 0x3 | 0x8);
                    return v.toString(16);
                });
            }

            if (Homey.isMock) {
                headerCollections.push({ id: '1', name: "sample collection 1", description: "a very simple collection for demonstration purposes", headers: [{ name: 'header-1', value: 'value-1' }, { name: 'header-2', value: 'value-2' }, { name: 'header-3', value: 'value-3' }] });
                headerCollections.push({ id: '2', name: "sample collection 2", description: "a very simple collection for demonstration purposes", headers: [{ name: 'header-1', value: 'value-1' }, { name: 'header-2', value: 'value-2' }, { name: 'header-3', value: 'value-3' }] });
                headerCollections.push({ id: '3', name: "sample collection 3", description: "a very simple collection for demonstration purposes", headers: [{ name: 'header-1', value: 'value-1' }, { name: 'header-2', value: 'value-2' }, { name: 'header-3', value: 'value-3' }] });
                renderHeaderCollections();

                certificates.push({ name: "sample certificate 1", description: "a very simple certificate for demonstration purposes" });
                certificates.push({ name: "sample certificate 2", description: "a very simple certificate for demonstration purposes" });
                certificates.push({ name: "sample certificate 3", description: "a very simple certificate for demonstration purposes" });
                renderCertificates();
            } else {
                Homey.get('headerCollections', (err, result) => {
                    if (err) return Homey.alert(err);
                    if (result) {
                        headerCollections = result;
                    }
                    renderHeaderCollections();
                });

                Homey.get('certificates', (err, result) => {
                    if (err) return Homey.alert(err);
                    if (result) {
                        certificates = result;
                    }
                    renderCertificates();
                })
            }

            Homey.ready();
        }

    </script>
</body>

</html>